
<!DOCTYPE html>

<html lang="en">
<head>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta charset="utf-8"/>
<meta content="Docutils 0.17.1: http://docutils.sourceforge.net/" name="generator"/>
<title>Usage | Metagenomic-DeepFRI 1.0 documentation</title>
<link href="_static/pygments.css" rel="stylesheet"/>
<link href="_static/theme.9297a650d9dd3016d913.css" rel="stylesheet"/>
<link href="search.html" rel="search" title="Search"/>
<link href="genindex.html" rel="index" title="Index"/>
<link href="output.html" rel="next" title="Results"/>
<link href="deepfri.html" rel="prev" title="What is DeepFRI?"/>
</head>
<body class="antialiased text-gray scroll-smooth">
<div class="min-h-screen xl:h-screen flex flex-col xl:grid xl:grid-layout print:block print:h-auto" data-action="keydown@window-&gt;search#focus " data-controller="sidebar search " id="page">
<a class="block transition -translate-x-full focus:translate-x-0 opacity-0 focus:opacity-100 text-xl bg-white p-4 z-20 absolute top-0 left-0 h-14" href="#usage" title="Skip navigation links">Skip to content</a>
<header class="grid-area-header z-10 h-14 fixed w-full top-0 print:hidden">
<div class="bg-gray-dark shadow-md flex items-center h-full xl:px-2 relative"><div class="flex items-center">
<button class="xl:hidden h-14 w-14 leading-14 text-gray-100 hover:bg-gray-700 hover:text-brand focus:outline-none focus:bg-gray-700 focus:text-brand" data-action="sidebar#open" data-sidebar-target="hamburger">
<span class="sr-only">Open navigation menu</span>
<svg aria-hidden="true" class="fill-current h-8 w-8" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg>
</button><a class="hover:bg-gray-700 focus:bg-gray-700 focus:outline-none" href="index.html" title="Back to homepage"><span class="hidden lg:inline-block shrink-0 font-medium text-gray-100 mx-5 leading-14 tracking-wider">Metagenomic-DeepFRI 1.0 documentation</span>
</a></div><div class="flex justify-end items-center flex-1"><form action="search.html" class="flex print:hidden justify-between items-center leading-14 md:ml-4 bg-gray-dark text-gray-300 focus-within:bg-gray-50 focus-within:text-gray-800 focus-within:absolute focus-within:inset-x-0 focus-within:top-0 md:focus-within:w-full md:focus-within:static z-10" data-action="click-&gt;search#focusSearchInput" id="searchbox" method="get">
<button aria-label="Get search results" class="text-inherit h-14 w-14" tabindex="-1">
<svg aria-hidden="true" class="fill-current stroke-current h-8 w-8" stroke-width="0.5" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></svg>
</button>
<input aria-label="Search the docs" class="pr-2 bg-transparent text-inherit focus:outline-none w-0 md:w-auto focus:w-full transition-all duration-100" data-search-target="searchInput" id="search-input" name="q" placeholder="Search the docs" type="search"/>
</form></div>
</div>
</header>
<aside class="grid-area-sidebar h-full fixed pt-14 xl:relative inset-y-0 left-0 z-20 xl:z-0 print:hidden overflow-y-auto transition-all transform transform-gpu -translate-x-full opacity-0 duration-300 xl:translate-x-0 xl:opacity-100" data-sidebar-target="sidebar">
<nav class="h-full overflow-y-auto bg-white text-gray-600 pt-8 flex flex-col" role="navigation">
<div class="nav-toc flex-1 pl-6"><p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><div class="nav-link"><svg class="expand" data-action="click-&gt;sidebar#expand keydown-&gt;sidebar#expandKeyPressed" tabindex="0" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg><a class="reference internal" data-action="click-&gt;sidebar#close" href="installation.html">Installation</a></div><ul>
<li class="toctree-l2"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="installation.html#install-environment-and-deepfri">1. Install environment and DeepFRI</a></div></li>
<li class="toctree-l2"><div class="nav-link"><svg class="expand" data-action="click-&gt;sidebar#expand keydown-&gt;sidebar#expandKeyPressed" tabindex="0" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg><a class="reference internal" data-action="click-&gt;sidebar#close" href="installation.html#retrieve-deepfri-model-weights">2. Retrieve <code class="docutils literal notranslate">DeepFRI</code> model weights</a></div><ul>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="installation.html#cpu-weights">CPU weights</a></div></li>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="installation.html#gpu-weights">GPU weights</a></div></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><div class="nav-link"><svg class="expand" data-action="click-&gt;sidebar#expand keydown-&gt;sidebar#expandKeyPressed" tabindex="0" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg><a class="reference internal" data-action="click-&gt;sidebar#close" href="deepfri.html">What is DeepFRI?</a></div><ul>
<li class="toctree-l2"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="deepfri.html#model-overview">Model overview</a></div></li>
<li class="toctree-l2"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="deepfri.html#pretrained-lstm">Pretrained LSTM</a></div></li>
<li class="toctree-l2"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="deepfri.html#graph-neural-network">Graph neural network</a></div></li>
<li class="toctree-l2"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="deepfri.html#performance">Performance</a></div></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using Metagenomic-DeepFRI</span></p>
<ul class="current">
<li class="toctree-l1 current expanded"><div class="nav-link"><svg class="expand" data-action="click-&gt;sidebar#expand keydown-&gt;sidebar#expandKeyPressed" tabindex="0" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg><a class="current reference internal" data-action="click-&gt;sidebar#close" href="#">Usage</a></div><ul>
<li class="toctree-l2"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="#prepare-database">1. Prepare database</a></div></li>
<li class="toctree-l2"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="#predict-protein-function">2. Predict protein function</a></div></li>
</ul>
</li>
<li class="toctree-l1"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="#available-parameters">Available parameters</a></div></li>
<li class="toctree-l1"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="output.html">Results</a></div></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Use cases</span></p>
<ul>
<li class="toctree-l1"><div class="nav-link"><svg class="expand" data-action="click-&gt;sidebar#expand keydown-&gt;sidebar#expandKeyPressed" tabindex="0" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg><a class="reference internal" data-action="click-&gt;sidebar#close" href="examples/index.html">Examples</a></div><ul>
<li class="toctree-l2"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="examples/ecoli.html"><em>E. Coli</em> pangenome analysis</a></div></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><div class="nav-link"><svg class="expand" data-action="click-&gt;sidebar#expand keydown-&gt;sidebar#expandKeyPressed" tabindex="0" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg><a class="reference internal" data-action="click-&gt;sidebar#close" href="contributing.html">Contributing</a></div><ul>
<li class="toctree-l2"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="contributing.html#bug-reports-and-feature-requests">Bug reports and feature requests</a></div></li>
<li class="toctree-l2"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="contributing.html#code-improvement">Code improvement</a></div></li>
<li class="toctree-l2"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="contributing.html#use-case-reporting">Use-case reporting</a></div></li>
</ul>
</li>
<li class="toctree-l1"><div class="nav-link"><a class="reference internal" data-action="click-&gt;sidebar#close" href="references.html">References</a></div></li>
</ul>
</div>
<button class="text-4xl text-gray-800 p-4 bottom-0 hover:text-brand xl:hidden focus:text-brand self-center" data-action="sidebar#close" title="Close navigation menu">
<span class="sr-only">Close navigation menu</span>
<svg aria-hidden="true" class="fill-current stroke-current h-6 w-6" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
</aside>
<main class="px-4 pt-14 xl:ml-fluid grid-area-main overflow-y-auto flex flex-col flex-1 h-full mx-0 md:mx-auto xl:mr-0"><nav aria-label="breadcrumbs" class="print:hidden mt-12 text-sm text-gray-light" role="navigation">
<a class="text-gray-light text-sm hover:text-gray-dark font-medium focus:text-gray-dark" href="index.html">Metagenomic-DeepFRI 1.0 documentation</a>
<span class="mr-1">/</span><span aria-current="page">Usage</span>
</nav>
<article class="flex-1" role="main">
<section id="usage">
<h1>Usage<a aria-label="Click to copy this link" class="headerlink tooltipped tooltipped-ne" data-action="click-&gt;clipboard#copyHeaderLink" data-controller="clipboard" href="#usage">¶</a></h1>
<section id="prepare-database">
<h2>1. Prepare database<a aria-label="Click to copy this link" class="headerlink tooltipped tooltipped-ne" data-action="click-&gt;clipboard#copyHeaderLink" data-controller="clipboard" href="#prepare-database">¶</a></h2>
<ol class="arabic">
<li><p>Upload structure (<code class="docutils literal notranslate">.pdb</code> or <code class="docutils literal notranslate">.mmcif</code>, can be gzipped) files to a folder in your system.</p></li>
<li><p>Run command:</p>
<div class="code-wrapper" data-controller="code">
<div class="code-header">
<span class="code-lang">default</span></div>
<div class="highlight"><pre><code><span class="n">deepfri_db_build</span> <span class="o">--</span><span class="nb">input</span> <span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">folder</span><span class="o">/</span><span class="k">with</span><span class="o">/</span><span class="n">strucures</span> <span class="o">--</span><span class="n">output</span> <span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">database</span>
</code></pre></div></div>
</li>
</ol>
<p><strong>Tip:</strong> building a database from AF20Swissprot (~550k predicted structures) on 32 CPU cores took ~30 min.</p>
<p>Use parameter <code class="docutils literal notranslate">-max_len</code> to define maximal length of the protein. Due to initial DeepFRI training set default value is set to <code class="docutils literal notranslate">1000</code>.</p>
<p>Main feature of this project is its ability to generate query contact map on the fly
using results from mmseqs2 target database search for similar protein sequences with known structures.
Later in the <code class="docutils literal notranslate">metagenomic_deepfri.py</code> contact map alignment is performed to use it as input to DeepFRI GCN.
(implemented in CPP_lib/load_contact_maps.h)</p>
<p>The command will search for structure files,
process them and store protein sequence and atoms positions inside <code class="docutils literal notranslate">database/seq_atom_db</code>.
It will also create a mmseqs2 database within <code class="docutils literal notranslate">database/</code>.</p>
<p>You can also use <code class="docutils literal notranslate">--input DIR_1 FILE_2 ...</code> argument list to parse structures from multiple sources.</p>
<p>Protein ID is used as a filename. A new protein whose ID already exists in the database will be skipped.
Use <code class="docutils literal notranslate">--overwrite</code> flag to overwrite existing sequences and atoms positions.</p>
</section>
<section id="predict-protein-function">
<h2>2. Predict protein function<a aria-label="Click to copy this link" class="headerlink tooltipped tooltipped-ne" data-action="click-&gt;clipboard#copyHeaderLink" data-controller="clipboard" href="#predict-protein-function">¶</a></h2>
<div class="code-wrapper" data-controller="code">
<div class="code-header">
<span class="code-lang">default</span></div>
<div class="highlight"><pre><code><span class="n">deepfri</span> <span class="o">-</span><span class="n">i</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">protein</span><span class="o">/</span><span class="n">sequences</span> <span class="o">-</span><span class="n">db</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">database</span><span class="o">/</span><span class="n">folder</span><span class="o">/</span><span class="n">from</span><span class="o">/</span><span class="n">previous</span><span class="o">/</span><span class="n">step</span> <span class="o">-</span><span class="n">w</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">deepfri</span><span class="o">/</span><span class="n">weights</span><span class="o">/</span><span class="n">folder</span> <span class="o">-</span><span class="n">o</span> <span class="o">/</span><span class="n">output_path</span>
</code></pre></div></div>
<p><strong>Attention:</strong> Single instance of DeepFRI on GPU requires 10GB VRAM.
Other available parameters can be found upon command <code class="docutils literal notranslate">deepfri --help</code>.</p>
</section>
</section>
<section id="available-parameters">
<h1>Available parameters<a aria-label="Click to copy this link" class="headerlink tooltipped tooltipped-ne" data-action="click-&gt;clipboard#copyHeaderLink" data-controller="clipboard" href="#available-parameters">¶</a></h1>
<p>.. list-table::
:widths: 25 25 50
:header-rows: 1</p>
<ul class="simple">
<li><ul>
<li><p>Parameter</p></li>
<li><p>Description</p></li>
<li><p>Default value</p></li>
</ul>
</li>
<li><ul>
<li><p><code class="docutils literal notranslate">--processing_modes</code></p></li>
<li><p>DeepFRI prediction mode.
mf = molecular_function
bp = biological_process
cc = cellular_component
ec = enzyme_commission</p></li>
<li><p><code class="docutils literal notranslate">mf,bp,cc,ec</code></p></li>
</ul>
</li>
<li><ul>
<li><p><code class="docutils literal notranslate">--angstrom_contact_thresh</code></p></li>
<li><p>Angstrom contact threshold.</p></li>
<li><p>6</p></li>
</ul>
</li>
<li><ul>
<li><p><code class="docutils literal notranslate">--generate_contacts</code></p></li>
<li><p>Gap fill during contact map alignment.</p></li>
<li><p>2</p></li>
</ul>
</li>
<li><ul>
<li><p><code class="docutils literal notranslate">--mmseqs_min_bitscore</code></p></li>
<li><p>Minimum bit score for MMSeqs2 search.</p></li>
<li><p>None</p></li>
</ul>
</li>
<li><ul>
<li><p><code class="docutils literal notranslate">--mmseqs_max_evalue</code></p></li>
<li><p>Maximum e-value for MMSeqs2 search.</p></li>
<li><p>None</p></li>
</ul>
</li>
<li><ul>
<li><p><code class="docutils literal notranslate">--mmseqs_min_identity</code></p></li>
<li><p>Minimum sequence identity for MMSeqs2 search.</p></li>
<li><p>0.5</p></li>
</ul>
</li>
<li><ul>
<li><p><code class="docutils literal notranslate">--mmseqs_min_bitscore</code></p></li>
<li><p>Minimum bit score for MMSeqs2 search.</p></li>
<li><p>None</p></li>
</ul>
</li>
<li><ul>
<li><p><code class="docutils literal notranslate">--threads</code></p></li>
<li><p>Number of threads to use for parallel processing.</p></li>
<li><p>1</p></li>
</ul>
</li>
</ul>
</section>
</article>
<footer>
<div class="mt-20 mb-4 text-sm text-gray-700 print:mt-4">© 2022, Metagenomic-DeepFRI team Made with <a href="https://www.sphinx-doc.org">Sphinx 4.4.0</a></div>
</footer></main>
<button class="fixed bottom-0 right-0 z-20 opacity-0 p-4 m-4 tracking-wide bg-gray-900 text-gray-100 transition transform transform-gpu duration-500 translate-y-full" data-action="search#hideSnackbar" data-search-target="snackbar">
  Clear highlights
</button><div class="fixed hidden inset-0 bg-black bg-opacity-50" data-action="click-&gt;sidebar#close" data-sidebar-target="screen">
</div>
</div>
<script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
<script src="_static/jquery.js"></script>
<script src="_static/underscore.js"></script>
<script src="_static/doctools.js"></script>
<script src="_static/theme.3051a0ec24cad00d4d88.js"></script>
</body>
</html>